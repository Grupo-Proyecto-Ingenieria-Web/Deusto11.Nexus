{% extends "base.html" %} 
{% load static %}
{% block tittle %}{{ tittle }}{% endblock %} 
{% block content %}
<div id="all">
    <div id="argum">
      <a href="{% url 'menu_default_portal' %}"><input class="personalizar" type="submit" value="Volver al inicio" /></a>
        <h1 id="title">NUEVO EMPLEADO</h1>
        <P>Rellena el siguiente formulario para a√±adir un nuevo empleado:</P>
        <div>
          <script>
            function Changecolor(){
              color=red
              

            }
            var color=document.getElementsByTagName("input")
            color.keydown=Changecolor;
          </script>
            <!--Change form-->
            <form action="{% url 'employer_create' %}" method="post">
              {% csrf_token %}
                Nombre:<input type="text"  name="name">
                <br><br> 
                Apellidos:<input type="text" name="surname">
                <br><br> 
                DNI del empleado:<input type="text" name="dni">
                <br><br> 
                E-mail:<input type="text" name="email">
                <br><br> 
                Telefono:<input type="text" name="telefone_number">
                <br><br>
                <input class="personalizar" type="submit" value="Registrarse" />
            </form>
            <!--Change form-->
        </div>
    </div>
    <div class='mt-3' id="answer">
    </div>
    <script>
      var SERVICE_URL="http://127.0.0.1:8000/nexus.com/ticket/registry/"
      var formulario=document.getElementsByTagName("input")
      var answer=document.getElementById("answer")
      formulario.addEventListener("submit"),function(e){
        e.preventDefault();
        var dates=new FormData(formulario)
        console.log(dates)
        console.log(dates.get('reference_number'))
        console.log(dates.get('title'))
        console.log(dates.get('description'))
        console.log(dates.get('starting_date'))
        console.log(dates.get('resolution_date'))
        console.log(dates.get('ticket_type'))
        console.log(dates.get('comment'))
        console.log(dates.get('machine'))
        
        fetch(SERVICE_URL,{
          method:'POST',
          body:dates
        })
        .then(res=>res.json())
        .then(dates=>{
          console.log(dates)
          if (dates==="error"){
            respuesta.innerHTML=`
            <div class="alert alert-primary" role="alert">
              fill in de gaps
            </div>`
          }else{
            respuesta.innerHTML=`
            <div class="alert alert-primary" role="alert">
            ${dates}
            </div>`
          }
        })
      }
    </script>
  </div>
</div>
{% endblock %}